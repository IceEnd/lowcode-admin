{"version":3,"file":"index.fed7c0dd.js","sources":["../../../../../../packages/ui/src/overlay/src/index.vue"],"sourcesContent":["<template>\n  <magic-ui-container v-if=\"visible\" class=\"magic-ui-overlay\" :config=\"{ items: config.items }\">\n    <slot></slot>\n  </magic-ui-container>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\n\nimport Core from '@tmagic/core';\nimport type { MNode } from '@tmagic/schema';\n\nimport useApp from '../../useApp';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object,\n      default: () => ({}),\n    },\n\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    const visible = ref(false);\n    const app: Core | undefined = useApp(props);\n    const node = app?.page?.getNode(props.config.id);\n\n    const openOverlay = () => {\n      visible.value = true;\n      if (app) {\n        app.emit('overlay:open', node);\n      }\n    };\n\n    const closeOverlay = () => {\n      visible.value = false;\n      if (app) {\n        app.emit('overlay:close', node);\n      }\n    };\n\n    app?.on('editor:select', (info, path) => {\n      if (path.find((node: MNode) => node.id === props.config.id)) {\n        openOverlay();\n      } else {\n        closeOverlay();\n      }\n    });\n\n    return {\n      visible,\n\n      openOverlay,\n      closeOverlay,\n    };\n  },\n});\n</script>\n"],"names":["_sfc_main","props","visible","app","useApp","node","_a","openOverlay","closeOverlay","info","path","node2","_component_magic_ui_container","_ctx"],"mappings":"4EAaA,MAAeA,EAAA,IAAgB,gBAAA,CAAA,MAAA,CACtB,OAAA,CACG,KAAA,OACA,QAAA,KAAA,CAAA,EACW,EACnB,MAAA,CAEO,KAAA,OACC,QAAA,KAAA,CAAA,EACW,CACnB,EACF,MAAAC,EAAA,OAGE,MAAAC,EAAgB,YAChBC,EAAAC,EAAAH,CAAA,EACAI,GAAAC,EAAAH,GAAA,YAAAA,EAAA,OAAA,YAAAG,EAAA,QAAAL,EAAA,OAAA,IAEAM,EAAA,IAAA,CACEL,EAAA,MAAA,GACAC,GACEA,EAAA,KAAA,eAAAE,CAAA,CACF,EAGFG,EAAA,IAAA,CACEN,EAAA,MAAA,GACAC,GACEA,EAAA,KAAA,gBAAAE,CAAA,CACF,EAGF,OAAAF,GAAA,MAAAA,EAAA,GAAA,gBAAA,CAAAM,EAAAC,IAAA,CACEA,EAAA,KAAAC,GAAAA,EAAA,KAAAV,EAAA,OAAA,EAAA,EACEM,IAEAC,GACF,GAGF,CAAO,QAAAN,EACL,YAAAK,EAEA,aAAAC,CACA,CACF,CAEJ,CAAA,0BA3DmC,MAAAI,EAAA,IAAA,iBAAA,oBAAA,oCAA0B,IAAA,YAAAA,EAAA,CAAA,IAAA,EAAE,MAAA,mBAC9C,OAAA,CAAA,MAAAC,EAAA,OAAA,KAAA,CAAA,EAAA"}