{"version":3,"file":"index-legacy.a35443c4.js","sources":["../../../../../../packages/ui/src/button/src/index.vue"],"sourcesContent":["<template>\n  <button class=\"magic-ui-button\" @click=\"clickHandler\">\n    <slot>\n      <magic-ui-text :config=\"textConfig\"></magic-ui-text>\n    </slot>\n  </button>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, getCurrentInstance, PropType, reactive } from 'vue';\n\nimport { MButton, MButtonInstance, MText } from '../../../src/types';\nimport useApp from '../../useApp';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object as PropType<MButton>,\n      default: () => ({}),\n    },\n\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    useApp(props);\n    const vm: MButtonInstance = getCurrentInstance()?.proxy as MButtonInstance;\n    const actions = reactive<Function[]>([]);\n    const actualActions = computed(() => [\n      typeof props.config.preAction === 'function' ? props.config.preAction : () => true,\n      ...actions,\n      typeof props.config.postAction === 'function' ? props.config.postAction : () => true,\n    ]);\n    function pushAction(action: Function): void {\n      actions.push(action);\n    }\n    async function clickHandler(): Promise<void> {\n      for (const fn of actualActions.value) {\n        if (typeof fn === 'function') {\n          const ret = await fn(vm, { model: props.model });\n          if (ret === false) {\n            break;\n          }\n        }\n      }\n    }\n\n    const textConfig = computed<MText>(() => ({\n      type: 'text',\n      text: props.config?.text || '',\n      disabledText: props.config?.disabledText || '',\n      html: props.config?.html || '',\n    }));\n\n    return {\n      pushAction,\n      clickHandler,\n      textConfig,\n    };\n  },\n});\n</script>\n"],"names":["_sfc_main","Vue","defineComponent","props","config","type","Object","default","model","setup","useApp","vm","actions","reactive","actualActions","preAction","postAction","pushAction","action","push","clickHandler","async","value","fn","textConfig","text","disabledText","html","resolveComponent","openBlock","createElementBlock","class"],"mappings":"2KAae,MAAAA,EAAAC,IAAgBC,gBAAA,CAAAC,MAAA,CACtBC,OAAA,CACGC,KAAAC,OACAC,QAAA,MAAA,IAERC,MAAA,CAEOH,KAAAC,OACCC,QAAA,MAAA,KAGVE,MAAAN,GAEEO,EAAAP,GACA,MAAAQ,EAA4BV,gCAC5BW,EAAgBX,IAAqBY,SAAA,IACrCC,EAAsBb,mBAAe,mBAAAE,EAAAC,OAAAW,UAAAZ,EAAAC,OAAAW,UAAA,KAAA,KAC2CH,EAC3E,mBAAAT,EAAAC,OAAAY,WAAAb,EAAAC,OAAAY,WAAA,KAAA,KAwBL,MAAA,CAAOC,WArBP,SAAAC,GACEN,EAAAO,KAAAD,EAAmB,EAqBnBE,aAnBFC,iBACE,IAAA,WAAAP,EAAAQ,MACE,GAAA,mBAAAC,IAEE,UADAA,EAAAZ,EAAA,CAAAH,MAAAL,EAAAK,QAEE,KAGN,EAYAgB,WATiBvB,oBAAuBI,KAAA,OAClCoB,KAAAtB,EAAAC,QAAAqB,MAAA,GACsBC,aAAAvB,EAAAC,QAAAsB,cAAA,GACgBC,KAAAxB,EAAAC,QAAAuB,MAAA,OAQ9C,6DA1DF1B,IAIS2B,iBAAA,iBAJwB,OAAA3B,IAAA4B,YAAO5B,IAAA6B,mBAAA,SAAA,CAAAC,MAAA,qFAG/B"}