{"version":3,"file":"index-legacy.5db67b5f.js","sources":["../../../../../../packages/ui/src/overlay/src/index.vue"],"sourcesContent":["<template>\n  <magic-ui-container v-if=\"visible\" class=\"magic-ui-overlay\" :config=\"{ items: config.items }\">\n    <slot></slot>\n  </magic-ui-container>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, ref } from 'vue';\n\nimport Core from '@tmagic/core';\nimport type { MNode } from '@tmagic/schema';\n\nimport useApp from '../../useApp';\n\nexport default defineComponent({\n  props: {\n    config: {\n      type: Object,\n      default: () => ({}),\n    },\n\n    model: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  setup(props) {\n    const visible = ref(false);\n    const app: Core | undefined = useApp(props);\n    const node = app?.page?.getNode(props.config.id);\n\n    const openOverlay = () => {\n      visible.value = true;\n      if (app) {\n        app.emit('overlay:open', node);\n      }\n    };\n\n    const closeOverlay = () => {\n      visible.value = false;\n      if (app) {\n        app.emit('overlay:close', node);\n      }\n    };\n\n    app?.on('editor:select', (info, path) => {\n      if (path.find((node: MNode) => node.id === props.config.id)) {\n        openOverlay();\n      } else {\n        closeOverlay();\n      }\n    });\n\n    return {\n      visible,\n\n      openOverlay,\n      closeOverlay,\n    };\n  },\n});\n</script>\n"],"names":["Vue","defineComponent","props","config","type","Object","default","model","setup","visible","app","useApp","node","page","getNode","id","openOverlay","value","emit","closeOverlay","on","info","path","find","node2","_component_magic_ui_container","resolveComponent","createBlock","key","class","items","_ctx"],"mappings":"2KAae,QAAAA,IAAgBC,gBAAA,CAAAC,MAAA,CACtBC,OAAA,CACGC,KAAAC,OACAC,QAAA,KAAA,CAAA,IAERC,MAAA,CAEOH,KAAAC,OACCC,QAAA,MAAA,KAGVE,MAAAN,GAGE,MAAAO,EAAgBT,YAChBU,EAAAC,EAAAT,GACAU,EAAAF,GAAAG,MAAAC,QAAAZ,EAAAC,OAAAY,IAEAC,EAAA,KACEP,EAAAQ,OAAA,EACAP,GACEA,EAAAQ,KAAA,eAAAN,EAA6B,EAIjCO,EAAA,KACEV,EAAAQ,OAAA,EACAP,GACEA,EAAAQ,KAAA,gBAAAN,EAA8B,EAYlC,OARAF,GAAAU,GAAA,iBAAA,CAAAC,EAAAC,KACEA,EAAAC,MAAAC,GAAAA,EAAAT,KAAAb,EAAAC,OAAAY,KACEC,IAEAG,GAAa,IAIjB,CAAOV,UACLO,cAEAG,eAEF,qDAzD+B,MAAAM,EAAAzB,IAAA0B,iBAAA,wDAA0B1B,IAAA2B,YAAAF,EAAA,CAAAG,IAAA,EAAEC,MAAA,mBAC9C1B,OAAA,CAAA2B,MAAAC,EAAA5B,OAAA2B,QAAA"}